{
    "collab_server" : "",
    "contents" : "library(stringr)\nlibrary(zipcode)\nlibrary(pdftools)\n\ndownload.file(\"https://www.census.gov/2010census/partners/pdf/FIPS_StateCounty_Code.pdf\", \"countynames.pdf\", mode = \"wb\")\nstateCntyCodes  <- pdf_text(\"countynames.pdf\")\n\n#parse PDF file to get IN data\ntabl <- list()\nfor (i in 10:11){\n  temp <- stateCntyCodes[i] %>% strsplit(\"\\r\\n\") %>% unlist() \n  temp <- temp[-c(1,40)] %>% strsplit(\"I.\") %>% unlist() %>% strsplit(\"   \") %>% unlist() %>% \n    strsplit(\"  \") %>% unlist()\n  \n  temp %<>% subset(nchar(temp) > 1) %>% strsplit(\" \") %>% unlist() %>% paste(collapse=\" \")\n  \n  allsplit <- temp %>% strsplit(\" \") %>% unlist()\n  statecodes <- subset(allsplit, allsplit %in% c(\"17\",\"18\",\"19\"))\n  countycodes <- subset(allsplit, nchar(allsplit) == 3 & allsplit != \"Jay\"& allsplit != \"St.\"& allsplit != \"Des\")\n  \n  counties <- temp %>% strsplit(\" .. ... \") %>% unlist()\n  counties[1] %<>% strsplit(\" \") %>% lapply(\"[[\",3) %>% unlist()\n  \n  tabl[[i]] <- cbind(statecodes, countycodes, counties) %>% as.data.frame\n}\nstateCntyCodes <- do.call(\"rbind\", tabl) %>% subset(statecodes == \"18\")\ncolnames(stateCntyCodes) <- c(\"fipstate\",\"fipscty\",\"ctyname\")\nstateCntyCodes <- sapply(stateCntyCodes, as.character)\nstateCntyCodes <- rbind(stateCntyCodes, c(\"26\",\"027\",\"Cass\")) %>% as.data.frame()\nstateCntyCodes <- sapply(stateCntyCodes, as.factor) %>% as.data.frame()\n\n\n\n\n\nzipCnty = read.table(\"zcta_county_rel_10.txt\", sep = \",\", colClasses = c(\"character\"), \n                     header = TRUE)\ndata(zipcode)\n\nzipMap = merge(zipCnty[, c(\"ZCTA5\", \"STATE\", \"COUNTY\")], \n               zipcode[, c(\"zip\",\"city\")], by.x = \"ZCTA5\", by.y = \"zip\")\n\nzipMap = merge(zipMap, stateCntyCodes, by.x = c(\"STATE\", \"COUNTY\"), by.y = c(\"fipstate\", \n                                                                              \"fipscty\"))\nsave(zipMap, file = \"zipCityCountyStateMap.Rda\")\n",
    "created" : 1488422303046.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3339547157",
    "id" : "6D7A534C",
    "lastKnownWriteTime" : 1488427286,
    "last_content_update" : 1488427286204,
    "path" : "~/CensusData/MakeCountyTable.R",
    "project_path" : "MakeCountyTable.R",
    "properties" : {
        "tempName" : "Untitled2"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}